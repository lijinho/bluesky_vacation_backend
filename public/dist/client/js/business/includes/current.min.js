app.controller("cancel_reservation",["$scope","$http",function(e,r){$(document).ready(function(){$("[id$='-trigger']").click(function(){var e=$(this).attr("id").replace("-trigger","");if("header-avatar"!=e){$("#reserve_code").val(e),$("#reserve_id").val(e);var a={};a.id=e;var t=JSON.stringify(a);r.post(APP_URL+"/reservation/cencel_request_send",{data:t}).then(function(e){if("false"==e.data.success){var r="#cancel-modal";$(r).removeClass("hide"),$(r).addClass("show"),$(r).attr("aria-hidden","false")}else location.reload()})}}),$("[id$='-trigger-pending']").click(function(){var e=$(this).attr("id").replace("-trigger-pending","");$("#reserve_code_pending").val(e),$("#reserve_id").val(e);var r="#pending-cancel-modal";$(r).removeClass("hide"),$(r).addClass("show"),$(r).attr("aria-hidden","false")}),$('[data-behavior="modal-close"]').click(function(e){e.preventDefault(),$(".modal").removeClass("show"),$(".modal").attr("aria-hidden","true"),$("body").removeClass("pos-fix")})}),e.dispute_form_errors=[],e.trigger_create_dispute=function(r){e.dispute_reservation_data=r,e.dispute_form_errors=[],$("body").addClass("pos-fix"),$("#dispute_modal").removeClass("hide").addClass("show").attr("aria-hidden","false")},e.submit_create_dispute=function(){$("#dipute_form_content").addClass("loading"),r({method:"POST",url:APP_URL+"/disputes/create",headers:{"Content-Type":"multipart/form-data"},data:e.dispute_reservation_data,transformRequest:function(e,r){var a=new FormData;return angular.forEach(e,function(e,r){"object"==jQuery.type(e)?$.each(e,function(e,t){a.append(r+"[]",t)}):a.append(r,e)}),delete r()["Content-Type"],a}}).success(function(r){if("error"==r.status)e.dispute_form_errors=r.errors;else if(e.dispute_form_errors=[],window.location.reload(),"success"==r.status)return;$("#dipute_form_content").removeClass("loading")}).error(function(r,a){e.dispute_form_errors=[],$("#dipute_form_content").removeClass("loading")})}}]);
